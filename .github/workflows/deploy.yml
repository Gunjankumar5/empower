name: Deploy to DigitalOcean

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Install DigitalOcean CLI
        run: |
          cd ~
          wget https://github.com/digitalocean/doctl/releases/download/v1.97.0/doctl-1.97.0-linux-amd64.tar.gz
          tar xf ~/doctl-1.97.0-linux-amd64.tar.gz
          sudo mv ~/doctl /usr/local/bin
      
      - name: Deploy
        env:
          DIGITALOCEAN_ACCESS_TOKEN: ${{ secrets.DIGITALOCEAN_TOKEN }}
        run: |
          doctl apps update YOUR_APP_ID --main-entry-point src/index.js
          # Note: Replace YOUR_APP_ID with your actual app ID from DigitalOcean

      - name: Notify Deployment
        if: success()
        run: echo "âœ… Deployed successfully!"
